<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>MongoDB + Flask API Docs</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css"
          rel="stylesheet">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <style>
      body { padding-top: 70px; background-color: #f8f9fa; }
      .sidebar { position: sticky; top: 70px; height: calc(100vh - 70px); overflow-y: auto; }
      .sidebar .list-group-item { border-radius: 0; border-left: 0; border-right: 0; }
      .sidebar .list-group-item.collapsible { font-weight: bold; }
      .sidebar .list-group-item-action:hover, .sidebar .list-group-item-action:focus {
        background-color: #e9ecef;
        color: #0056b3;
        transition: background-color 0.2s ease-in-out;
      }
      .sidebar .collapse .list-group-item { padding-left: 2.5rem; font-size: 0.9em; }
      main h2 { color: #343a40; border-bottom: 2px solid #dee2e6; padding-bottom: 0.5rem; margin-bottom: 1rem; }
      .card { transition: box-shadow 0.3s ease-in-out; }
      .card:hover { box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important; }
      pre { background-color: #282c34; color: #abb2bf; padding: 1rem; border-radius: 0.3rem; }
      code.language-bash::before { content: "$ "; color: #6c757d; }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top shadow-sm">
  <div class="container-fluid">
    <a class="navbar-brand animate__animated animate__fadeInDown" href="{{ url_for('home') }}">
        <i class="bi bi-box-fill me-2"></i>MongoDB+Flask
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarNav"><span
            class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="{{ url_for('add_user_form') }}">Ekle</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('users_page') }}">Listele</a></li>
        <li class="nav-item"><a class="nav-link active" href="{{ url_for('docs') }}">Docs</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container-fluid mt-4">
  <div class="row">
    <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="list-group list-group-flush">
        <a class="list-group-item list-group-item-action collapsible px-3 py-2" data-bs-toggle="collapse" href="#overviewCollapse" role="button">
            <i class="bi bi-info-circle-fill me-2"></i>Genel Bakış
        </a>
        <div class="collapse show" id="overviewCollapse">
          <a class="list-group-item list-group-item-action py-2" href="#overview">Detaylar</a>
        </div>

        <a class="list-group-item list-group-item-action collapsible px-3 py-2" data-bs-toggle="collapse" href="#uiFeaturesCollapse" role="button">
            <i class="bi bi-window-sidebar me-2"></i>UI Özellikleri
        </a>
        <div class="collapse show" id="uiFeaturesCollapse">
          <a class="list-group-item list-group-item-action py-2" href="#ui-features">Detaylar</a>
        </div>

        <a class="list-group-item list-group-item-action px-3 py-2" href="#api-endpoints">
            <i class="bi bi-hdd-stack-fill me-2"></i>API Endpointleri
        </a>
        <a class="list-group-item list-group-item-action px-3 py-2" href="#sample-data">
            <i class="bi bi-database-fill-add me-2"></i>Örnek Veri
        </a>
        <a class="list-group-item list-group-item-action px-3 py-2" href="#getting-started">
            <i class="bi bi-play-circle-fill me-2"></i>Başlangıç
        </a>
      </div>
    </nav>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-3">
      <section id="overview" class="mb-5 animate__animated animate__fadeInUp">
        <div class="card shadow-sm">
            <div class="card-body">
                <h2 class="card-title">Genel Bakış</h2>
                <p>Bu uygulama MongoDB ve Flask kullanarak tam kapsamlı CRUD, arama, sıralama, silme ve güncelleme işlemlerini hem API hem de modern bir UI aracılığıyla sunar.</p>
                <p>Bootstrap 5, Animate.css ve Highlight.js gibi modern web teknolojilerinden yararlanır.</p>
            </div>
        </div>
      </section>

      <section id="ui-features" class="mb-5 animate__animated animate__fadeInUp" style="animation-delay: 0.1s;">
        <div class="card shadow-sm">
            <div class="card-body">
                <h2 class="card-title">UI Özellikleri</h2>
                <ul>
                  <li>Bootstrap 5 tabanlı responsive ve modern arayüz</li>
                  <li>AJAX destekli kullanıcı ekleme, düzenleme, silme</li>
                  <li>Sunucu taraflı arama ve sıralama yetenekleri</li>
                  <li>Tek tıklama ile örnek veri oluşturma</li>
                  <li>Gelişmiş dokümantasyon sayfası</li>
                </ul>
            </div>
        </div>
      </section>

      <section id="api-endpoints" class="mb-5 animate__animated animate__fadeInUp" style="animation-delay: 0.2s;">
        <div class="card shadow-sm">
            <div class="card-body">
                <h2 class="card-title">API Endpointleri</h2>
                <div class="card mb-3 bg-light border">
                  <div class="card-body">
                    <h5><span class="badge bg-success me-2">GET</span> /api/users</h5>
                    <p class="mb-1">Tüm kullanıcıları getirir. Opsiyonel query parametreleri:</p>
                    <ul>
                        <li><code>search</code>: İsim veya email'de arama yapar.</li>
                        <li><code>sort</code>: <code>name</code> veya <code>email</code> alanına göre sıralar.</li>
                    </ul>
                    <pre><code class="language-bash">curl "http://localhost:5000/api/users?search=john&sort=email"</code></pre>
                  </div>
                </div>
                <div class="card mb-3 bg-light border">
                  <div class="card-body">
                    <h5><span class="badge bg-success me-2">GET</span> /api/user/&lt;id&gt;</h5>
                    <p class="mb-1">Belirtilen ID'ye sahip tek bir kullanıcıyı getirir.</p>
                    <pre><code class="language-bash">curl http://localhost:5000/api/user/611a3f...</code></pre>
                  </div>
                </div>
                <div class="card mb-3 bg-light border">
                  <div class="card-body">
                    <h5><span class="badge bg-primary me-2">POST</span> /api/add</h5>
                    <p class="mb-1">Yeni bir kullanıcı ekler. JSON body gerektirir:</p>
                    <pre><code class="language-json">{ "name": "Yeni Kullanıcı", "email": "yeni@example.com" }</code></pre>
                    <pre><code class="language-bash">curl -X POST -H "Content-Type: application/json" -d '{"name":"Test","email":"test@example.com"}' http://localhost:5000/api/add</code></pre>
                  </div>
                </div>
                 <div class="card mb-3 bg-light border">
                  <div class="card-body">
                    <h5><span class="badge bg-warning text-dark me-2">POST</span> /api/update/&lt;id&gt;</h5>
                    <p class="mb-1">Belirtilen ID'ye sahip kullanıcıyı günceller. JSON body gerektirir:</p>
                    <pre><code class="language-json">{ "name": "Güncel Ad", "email": "guncel@example.com" }</code></pre>
                    <pre><code class="language-bash">curl -X POST -H "Content-Type: application/json" -d '{"name":"Updated","email":"updated@example.com"}' http://localhost:5000/api/update/611a3f...</code></pre>
                  </div>
                </div>
                 <div class="card mb-3 bg-light border">
                  <div class="card-body">
                    <h5><span class="badge bg-danger me-2">POST</span> /api/delete/&lt;id&gt;</h5>
                    <p class="mb-1">Belirtilen ID'ye sahip kullanıcıyı siler.</p>
                    <pre><code class="language-bash">curl -X POST http://localhost:5000/api/delete/611a3f...</code></pre>
                  </div>
                </div>
            </div>
        </div>
      </section>

      <section id="sample-data" class="mb-5 animate__animated animate__fadeInUp" style="animation-delay: 0.3s;">
         <div class="card shadow-sm">
            <div class="card-body">
                <h2 class="card-title">Örnek Veri Oluşturma</h2>
                <p>Uygulamayı test etmek için hızlıca veri eklemek isterseniz, aşağıdaki endpoint'i ziyaret ederek 100 adet rastgele kullanıcı oluşturabilirsiniz:</p>
                <a href="{{ url_for('generate_sample_data') }}" class="btn btn-info">
                    <i class="bi bi-magic me-2"></i>Örnek Veri Oluştur
                </a>
                <p class="mt-2"><small>Veya tarayıcıda açın:</small> <code>/generate-sample</code></p>
            </div>
        </div>
      </section>

      <section id="getting-started" class="mb-5 animate__animated animate__fadeInUp" style="animation-delay: 0.4s;">
        <div class="card shadow-sm">
            <div class="card-body">
                <h2 class="card-title">Başlangıç</h2>
                <ol>
                  <li>Projeyi bilgisayarınıza klonlayın: <br><code>git clone https://your-repo-url/mongodb-flask-demo.git</code></li>
                  <li>Proje dizinine gidin ve bir sanal ortam (virtual environment) oluşturup aktifleştirin: <br><code>cd mongodb-flask-demo</code><br><code>python -m venv venv</code><br><code>source venv/bin/activate</code> (Linux/Mac) veya <code>.\venv\Scripts\activate</code> (Windows)</li>
                  <li>Gerekli Python paketlerini yükleyin: <br><code>pip install Flask pymongo bson Flask-Cors Faker</code></li>
                  <li>Yerel MongoDB veritabanı sunucunuzun çalıştığından emin olun.</li>
                  <li>Uygulamayı başlatın: <br><code>python your_main_script.py</code></li>
                  <li>Tarayıcınızda <code>http://localhost:5000</code> adresini açın.</li>
                </ol>
            </div>
        </div>
      </section>
    </main>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<!-- Removed the custom collapsible script as Bootstrap handles it with data-bs-toggle="collapse" -->
</body>
</html>
